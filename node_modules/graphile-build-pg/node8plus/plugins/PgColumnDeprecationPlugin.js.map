{"version":3,"sources":["../../src/plugins/PgColumnDeprecationPlugin.js"],"names":["PgColumnDeprecationPlugin","builder","hook","field","build","context","scope","isPgRowType","isPgCompoundType","pgIntrospection","table","pgFieldIntrospection","kind","tags","deprecated","Object","assign","deprecationReason","Array","isArray","join"],"mappings":";;;;;;kBAGgB,SAASA,yBAAT,CAAmCC,OAAnC,EAA4C;AAC1DA,UAAQC,IAAR,CAAa,gCAAb,EAA+C,CAACC,KAAD,EAAQC,KAAR,EAAeC,OAAf,KAA2B;AACxE,UAAM;AACJC,aAAO;AACLC,mBADK;AAELC,wBAFK;AAGLC,yBAAiBC,KAHZ;AAILC;AAJK;AADH,QAOFN,OAPJ;AAQA,QACE,EAAEE,eAAeC,gBAAjB,KACA,CAACE,KADD,IAEAA,MAAME,IAAN,KAAe,OAFf,IAGA,CAACD,oBAHD,IAIA,CAACA,qBAAqBE,IALxB,EAME;AACA,aAAOV,KAAP;AACD;AACD,WAAOQ,qBAAqBE,IAArB,CAA0BC,UAA1B,GACHC,OAAOC,MAAP,CAAc,EAAd,EAAkBb,KAAlB,EAAyB;AACvBc,yBAAmBC,MAAMC,OAAN,CAAcR,qBAAqBE,IAArB,CAA0BC,UAAxC,IACfH,qBAAqBE,IAArB,CAA0BC,UAA1B,CAAqCM,IAArC,CAA0C,IAA1C,CADe,GAEfT,qBAAqBE,IAArB,CAA0BC;AAHP,KAAzB,CADG,GAMHX,KANJ;AAOD,GAzBD;AA0BD,C","file":"PgColumnDeprecationPlugin.js","sourcesContent":["// @flow\nimport type { Plugin } from \"graphile-build\";\n\nexport default (function PgColumnDeprecationPlugin(builder) {\n  builder.hook(\"GraphQLObjectType:fields:field\", (field, build, context) => {\n    const {\n      scope: {\n        isPgRowType,\n        isPgCompoundType,\n        pgIntrospection: table,\n        pgFieldIntrospection,\n      },\n    } = context;\n    if (\n      !(isPgRowType || isPgCompoundType) ||\n      !table ||\n      table.kind !== \"class\" ||\n      !pgFieldIntrospection ||\n      !pgFieldIntrospection.tags\n    ) {\n      return field;\n    }\n    return pgFieldIntrospection.tags.deprecated\n      ? Object.assign({}, field, {\n          deprecationReason: Array.isArray(pgFieldIntrospection.tags.deprecated)\n            ? pgFieldIntrospection.tags.deprecated.join(\"\\n\")\n            : pgFieldIntrospection.tags.deprecated,\n        })\n      : field;\n  });\n}: Plugin);\n"]}